"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var s=0;s<n.length;s++){var a=n[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,s,a){return s&&e(n.prototype,s),a&&e(n,a),n}}();!function(e){e(document).ready(function(){new(function(){function n(){_classCallCheck(this,n);var s=this;e(".acf-map").each(function(){s.new_map(e(this))})}return _createClass(n,[{key:"new_map",value:function(n){var s=n.find(".marker"),a={zoom:16,center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.ROADMAP},t=new google.maps.Map(n[0],a);t.markers=[];var i=this;s.each(function(){i.add_marker(e(this),t)}),this.center_map(t)}},{key:"add_marker",value:function(e,n){var s=new google.maps.LatLng(e.attr("data-lat"),e.attr("data-lng")),a=new google.maps.Marker({position:s,map:n});if(n.markers.push(a),e.html()){var t=new google.maps.InfoWindow({content:e.html()});google.maps.event.addListener(a,"click",function(){t.open(n,a)})}}},{key:"center_map",value:function(n){var s=new google.maps.LatLngBounds;e.each(n.markers,function(e,n){var a=new google.maps.LatLng(n.position.lat(),n.position.lng());s.extend(a)}),1==n.markers.length?(n.setCenter(s.getCenter()),n.setZoom(16)):n.fitBounds(s)}}]),n}()),new(function(){function n(){_classCallCheck(this,n),this.addSearchHTML(),this.resultsDiv=e("#search-overlay__results"),this.openButton=e(".js-search-trigger"),this.closeButton=e(".search-overlay__close"),this.searchOverlay=e(".search-overlay"),this.searchField=e("#search-term"),this.events(),this.isOverlayOpen=!1,this.isSpinnerVisible=!1,this.previousValue,this.typingTimer}return _createClass(n,[{key:"events",value:function(){this.openButton.on("click",this.openOverlay.bind(this)),this.closeButton.on("click",this.closeOverlay.bind(this)),e(document).on("keydown",this.keyPressDispatcher.bind(this)),this.searchField.on("keyup",this.typingLogic.bind(this))}},{key:"typingLogic",value:function(){this.searchField.val()!=this.previousValue&&(clearTimeout(this.typingTimer),this.searchField.val()?(this.isSpinnerVisible||(this.resultsDiv.html('<div class="spinner-loader"></div>'),this.isSpinnerVisible=!0),this.typingTimer=setTimeout(this.getResults.bind(this),750)):(this.resultsDiv.html(""),this.isSpinnerVisible=!1)),this.previousValue=this.searchField.val()}},{key:"getResults",value:function(){var n=this;e.getJSON(exData.root_url+"/wp-json/ex/v1/search?term="+this.searchField.val(),function(e){n.resultsDiv.html('\n                    <div class="row">\n                        <div class="one-third">\n                            <h2 class="search-overlay_section-title">General Information</h2>\n                            '+(e.generalInfo.length?'<ul class="link-list min-list">':"<p>No general information matches that search.</p>")+"\n                            "+e.generalInfo.map(function(e){return'<li><a href="'+e.permalink+'">'+e.title+"</a> "+("post"==e.postType?"by "+e.authorName:"")+" </li>"}).join("")+" \n                            "+(e.generalInfo.length?"</ul>":"")+'\n                        </div>\n                        <div class="one-third">\n                            <h2 class="search-overlay_section-title">Companies</h2>\n                            '+(e.companies.length?'<ul class="link-list min-list">':'<p>No company match that search.<a href="'+exData.root_url+'/companies">View all companies</a></p>')+"\n                            "+e.companies.map(function(e){return'<li><a href="'+e.permalink+'">'+e.title+"</a></li>"}).join("")+" \n                            "+(e.companies.length?"</ul>":"")+'\n\n                            <h2 class="search-overlay_section-title">Persons</h2>\n                            '+(e.persons.length?'<ul class="professor-cards">':"<p>No person match that search.</p>")+"\n                            "+e.persons.map(function(e){return'\n                            <li class="professor-card__list-item">\n                                <a class="professor-card" href="'+e.permalink+'">\n                                    <img class="professor-card__image" src="'+e.image+'" alt="">\n                                    <span class="professor-card__name">'+e.title+"</span>\n                                </a>\n                            </li>\n                            "}).join("")+" \n                            "+(e.persons.length?"</ul>":"")+'\n                        </div>\n                        <div class="one-third">\n                            <h2 class="search-overlay_section-title">Arounds</h2>\n                            '+(e.arounds.length?'<ul class="link-list min-list">':'<p>No arounds match that search.<a href="'+exData.root_url+'/arounds">View all arounds</a></p>')+"\n                            "+e.arounds.map(function(e){return'<li><a href="'+e.permalink+'">'+e.title+"</a></li>"}).join("")+" \n                            "+(e.arounds.length?"</ul>":"")+'\n\n                            <h2 class="search-overlay_section-title">Events</h2>\n                            '+(e.events.length?"":'<p>No events match that search.<a href="'+exData.root_url+'/events">View all events</a></p>')+"\n                            "+e.events.map(function(e){return'\n                            <div class="event-summary">\n                                <a class="event-summary__date t-center" href="'+e.permalink+'">\n                                    <span class="event-summary__month">'+e.month+'</span>\n                                    <span class="event-summary__day">'+e.day+'</span>  \n                                </a>\n                                <div class="event-summary__content">\n                                    <h5 class="event-summary__title headline headline--tiny"><a href="'+e.permalink+'">'+e.title+"</a></h5>\n                                    <p>"+e.description+'<a href="'+e.permalink+'" class="nu gray">Learn more</a></p>\n                                </div>\n                            </div>\n                            '}).join("")+"\n                        </div>\n                    </div\n                    "),n.isSpinnerVisible=!1})}},{key:"keyPressDispatcher",value:function(n){83!=n.keyCode||this.isOverlayOpen||e("input, textarea").is(":focus")||this.openOverlay(),27==n.keyCode&&this.isOverlayOpen&&this.closeOverlay()}},{key:"openOverlay",value:function(){var n=this;this.searchOverlay.addClass("search-overlay--active"),e("body").addClass("body-no-scroll"),this.searchField.val(""),setTimeout(function(){return n.searchField.focus()},301),console.log("our open method just ran"),this.isOverlayOpen=!0}},{key:"closeOverlay",value:function(){this.searchOverlay.removeClass("search-overlay--active"),e("body").removeClass("body-no-scroll"),console.log("our close method jusr ran"),this.isOverlayOpen=!1}},{key:"addSearchHTML",value:function(){e("body").append('\n                <div class="search-overlay">\n                    <div classs="search-overlay__top">\n                        <div class="container">\n                            <i class="fa fa-search search-overlay__icon" aria-hidden="true"></i>\n                            <input type="text" class="search-term" placeholder="What are you looking for?" id="search-term">\n                            <i class="fa fa-window-close search-overlay__close" aria-hidden="true"></i>\n                        </div>\n                    </div>\n                    <div class="container">\n                        <div id="search-overlay__results"></div>\n                    </div>\n              </div>\n                ')}}]),n}())})}(jQuery);