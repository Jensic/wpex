!function(e){"use strict";e(document).ready(function(){new class{constructor(){var s=this;e(".acf-map").each(function(){s.new_map(e(this))})}new_map(s){var t=s.find(".marker"),i={zoom:16,center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.ROADMAP},a=new google.maps.Map(s[0],i);a.markers=[];var r=this;t.each(function(){r.add_marker(e(this),a)}),this.center_map(a)}add_marker(e,s){var t=new google.maps.LatLng(e.attr("data-lat"),e.attr("data-lng")),i=new google.maps.Marker({position:t,map:s});if(s.markers.push(i),e.html()){var a=new google.maps.InfoWindow({content:e.html()});google.maps.event.addListener(i,"click",function(){a.open(s,i)})}}center_map(s){var t=new google.maps.LatLngBounds;e.each(s.markers,function(e,s){var i=new google.maps.LatLng(s.position.lat(),s.position.lng());t.extend(i)}),1==s.markers.length?(s.setCenter(t.getCenter()),s.setZoom(16)):s.fitBounds(t)}};new class{constructor(){this.addSearchHTML(),this.resultsDiv=e("#search-overlay__results"),this.openButton=e(".js-search-trigger"),this.closeButton=e(".search-overlay__close"),this.searchOverlay=e(".search-overlay"),this.searchField=e("#search-term"),this.events(),this.isOverlayOpen=!1,this.isSpinnerVisible=!1,this.previousValue,this.typingTimer}events(){this.openButton.on("click",this.openOverlay.bind(this)),this.closeButton.on("click",this.closeOverlay.bind(this)),e(document).on("keydown",this.keyPressDispatcher.bind(this)),this.searchField.on("keyup",this.typingLogic.bind(this))}typingLogic(){this.searchField.val()!=this.previousValue&&(clearTimeout(this.typingTimer),this.searchField.val()?(this.isSpinnerVisible||(this.resultsDiv.html('<div class="spinner-loader"></div>'),this.isSpinnerVisible=!0),this.typingTimer=setTimeout(this.getResults.bind(this),750)):(this.resultsDiv.html(""),this.isSpinnerVisible=!1)),this.previousValue=this.searchField.val()}getResults(){e.when(e.getJSON(exData.root_url+"/wp-json/wp/v2/posts?search="+this.searchField.val()),e.getJSON(exData.root_url+"/wp-json/wp/v2/pages?search="+this.searchField.val())).then((e,s)=>{var t=e[0].concat(s[0]);this.resultsDiv.html(`\n                        <h2 class="search-overlay_section-title">General Information</h2>\n                        ${t.length?'<ul class="link-list min-list">':"<p>No general information matches that search.</p>"}\n                           ${t.map(e=>`<li><a href="${e.link}">${e.title.rendered}</a> ${"post"==e.type?`by ${e.authorName}`:""} </li>`).join("")} \n                        ${t.length?"</ul>":""}\n                    `),this.isSpinnerVisible=!1},()=>{this.resultsDiv.html("<p>Unexpected error; please try again.</p>")})}keyPressDispatcher(s){83!=s.keyCode||this.isOverlayOpen||e("input, textarea").is(":focus")||this.openOverlay(),27==s.keyCode&&this.isOverlayOpen&&this.closeOverlay()}openOverlay(){this.searchOverlay.addClass("search-overlay--active"),e("body").addClass("body-no-scroll"),this.searchField.val(""),setTimeout(()=>this.searchField.focus(),301),console.log("our open method just ran"),this.isOverlayOpen=!0}closeOverlay(){this.searchOverlay.removeClass("search-overlay--active"),e("body").removeClass("body-no-scroll"),console.log("our close method jusr ran"),this.isOverlayOpen=!1}addSearchHTML(){e("body").append('\n                <div class="search-overlay">\n                    <div classs="search-overlay__top">\n                        <div class="container">\n                            <i class="fa fa-search search-overlay__icon" aria-hidden="true"></i>\n                            <input type="text" class="search-term" placeholder="What are you looking for?" id="search-term">\n                            <i class="fa fa-window-close search-overlay__close" aria-hidden="true"></i>\n                        </div>\n                    </div>\n                    <div class="container">\n                        <div id="search-overlay__results"></div>\n                    </div>\n              </div>\n                ')}}})}(jQuery);